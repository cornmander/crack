import crack.lang Buffer;
import crack.ext._mongo

BSON_BINARY_SUBTYPE_GENERIC, BSON_BINARY_SUBTYPE_FUNCTION, BSON_BINARY_SUBTYPE_BINARY, 
BSON_BINARY_SUBTYPE_UUID, BSON_BINARY_SUBTYPE_MD5, BSON_BINARY_SUBTYPE_USER_DEFINED, 
BSON_TYPE_NONE, BSON_TYPE_DOUBLE, BSON_TYPE_STRING, BSON_TYPE_DOCUMENT, BSON_TYPE_ARRAY, 
BSON_TYPE_BINARY, BSON_TYPE_OID, BSON_TYPE_BOOLEAN, BSON_TYPE_UTC_DATETIME, 
BSON_TYPE_NULL, BSON_TYPE_REGEXP, BSON_TYPE_JS_CODE, BSON_TYPE_SYMBOL, BSON_TYPE_JS_CODE_W_SCOPE, 
BSON_TYPE_INT32, BSON_TYPE_TIMESTAMP, BSON_TYPE_INT64, MONGO_COLLECTION_DEFAULTS, 
MONGO_COLLECTION_CAPPED, MONGO_COLLECTION_CAPPED_MAX, MONGO_COLLECTION_AUTO_INDEX_ID, 
MONGO_COLLECTION_SIZED, MONGO_INDEX_UNIQUE, MONGO_INDEX_DROP_DUPS, MONGO_INDEX_BACKGROUND, 
MONGO_INDEX_SPARSE,


// Types
bson, mongo_connection, mongo_packet, mongo_sync_connection, 
mongo_sync_cursor, mongo_sync_pool, mongo_sync_pool_connection,


// Function names
bson_type_as_string,
bson_new,
bson_new_sized,
bson_new_from_data,
bson_finish,
bson_reset,
bson_free,
bson_size,
bson_data,
bson_validate_key,

bson_append_string,
bson_append_double,
bson_append_document,
bson_append_array,
bson_append_binary,
bson_append_oid,
bson_append_boolean,
bson_append_utc_datetime,
bson_append_null,
bson_append_regex,

bson_append_javascript,
bson_append_symbol,
bson_append_javascript_w_scope,
bson_append_int32,
bson_append_timestamp,
bson_append_int64,
mongo_sync_connect,
mongo_sync_conn_seed_add,
mongo_sync_reconnect,
mongo_sync_disconnect,

mongo_sync_conn_get_slaveok,
mongo_sync_conn_set_slaveok,
mongo_sync_conn_get_safe_mode,
mongo_sync_conn_set_safe_mode,
mongo_sync_conn_get_auto_reconnect,
mongo_sync_conn_set_auto_reconnect,
mongo_sync_conn_get_max_insert_size,
mongo_sync_conn_set_max_insert_size,
mongo_sync_cmd_update,
mongo_sync_cmd_insert_n,

mongo_sync_cmd_query,
mongo_sync_cmd_get_more,
mongo_sync_cmd_delete,
mongo_sync_cmd_custom,
mongo_sync_cmd_count,
mongo_sync_cmd_exists,
mongo_sync_cmd_drop,
mongo_sync_cmd_reset_error,
mongo_sync_cmd_is_master,
mongo_sync_cmd_ping,

mongo_sync_cmd_user_add,
mongo_sync_cmd_user_remove,
mongo_sync_cmd_authenticate,
mongo_sync_cmd_index_create,
mongo_sync_cmd_index_drop,
mongo_sync_cmd_index_drop_all,
mongo_wire_packet_new,
mongo_wire_packet_free,
mongo_sync_cursor_new,
mongo_sync_cursor_next,

mongo_sync_cursor_get_data,
mongo_sync_cursor_free,
mongo_sync_pool_new,
mongo_sync_pool_free,
mongo_sync_pool_pick,
mongo_sync_pool_return,
mongo_util_oid_init,
mongo_util_oid_new,
mongo_util_oid_new_with_time,
mongo_util_oid_as_string,

mongo_connect,
mongo_disconnect,
mongo_connection_get_requestid,
mongo_connection_set_timeout;

b := bson_new();
greeting := "greeting";
hello := "hello";
bson_append_string(b, greeting.buffer, hello.buffer, int32(hello.size));
bson_append_double(b, "float".buffer, 3.1541);
bson_append_boolean(b, "bool".buffer, true);
bson_append_null(b, "null".buffer);

bson_append_int32(b,"int32".buffer, 65535);
bson_append_int64(b,"int64".buffer, 7979879889);
bson_finish(b);

data := Buffer(bson_data(b), bson_size(b));

bson_free(b);

